# ThunderBench CLI ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
npm install -g thunderbench
```

### åŸºæœ¬ç”¨æ³•

```bash
thunderbench [é€‰é¡¹] [é…ç½®æ–‡ä»¶]
```

## ğŸ“‹ å‘½ä»¤é€‰é¡¹

### æ ¸å¿ƒé€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | æè¿° | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--config` | `-c` | é…ç½®æ–‡ä»¶è·¯å¾„ | `./examples/test-config.ts` |
| `--verbose` | `-v` | è¯¦ç»†è¾“å‡ºæ¨¡å¼ | `false` |
| `--version` | `-V` | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ | - |
| `--help` | `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | - |

### æ‰§è¡Œæ§åˆ¶

| é€‰é¡¹ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `--dry-run` | ä»…éªŒè¯é…ç½®ï¼Œä¸æ‰§è¡Œæµ‹è¯• | `false` |
| `--no-progress` | ä¸æ˜¾ç¤ºå®æ—¶è¿›åº¦ | `false` |
| `--no-report` | ä¸ç”ŸæˆæŠ¥å‘Šæ–‡ä»¶ | `false` |

### å…¨å±€å‚æ•°è¦†ç›–

| é€‰é¡¹ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `--timeout <ms>` | å…¨å±€è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ | `30000` |
| `--concurrent <number>` | å…¨å±€å¹¶å‘æ•°è¦†ç›– | `10` |

### è¾“å‡ºæ§åˆ¶

| é€‰é¡¹ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `--output <dir>` | æŠ¥å‘Šè¾“å‡ºç›®å½• | `./reports` |
| `--cleanup-wrk` | æµ‹è¯•å®Œæˆåæ¸…ç†ä¸´æ—¶æ–‡ä»¶ | `false` |

### ç¤ºä¾‹å’Œå¸®åŠ©

| é€‰é¡¹ | æè¿° |
|------|------|
| `--list-examples` | åˆ—å‡ºå¯ç”¨çš„ç¤ºä¾‹é…ç½®æ–‡ä»¶ |
| `--create-example` | åˆ›å»ºç¤ºä¾‹é…ç½®æ–‡ä»¶ |

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### 1. æŸ¥çœ‹å¸®åŠ©å’Œç‰ˆæœ¬

```bash
# æŸ¥çœ‹å¸®åŠ©
thunderbench --help

# æŸ¥çœ‹ç‰ˆæœ¬
thunderbench --version
```

### 2. åˆ—å‡ºç¤ºä¾‹é…ç½®

```bash
thunderbench --list-examples
```

### 3. åˆ›å»ºç¤ºä¾‹é…ç½®

```bash
thunderbench --create-example
```

### 4. é…ç½®éªŒè¯ï¼ˆå¹²è¿è¡Œï¼‰

```bash
# éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•
thunderbench --config examples/simple-wrk-config.js --dry-run
```

### 5. æ‰§è¡Œæ€§èƒ½æµ‹è¯•

#### åŸºæœ¬æµ‹è¯•
```bash
thunderbench --config examples/simple-wrk-config.js
```

#### è¯¦ç»†è¾“å‡ºæ¨¡å¼
```bash
thunderbench --config examples/simple-wrk-config.js --verbose
```

#### è‡ªå®šä¹‰è¾“å‡ºç›®å½•
```bash
thunderbench --config examples/simple-wrk-config.js -o ./my-reports
```

#### å…¨å±€å‚æ•°è¦†ç›–
```bash
thunderbench --config examples/simple-wrk-config.js \
  --timeout 5000 \
  --concurrent 50
```

## ğŸ“Š é…ç½®æ–‡ä»¶æ ¼å¼

### åŸºç¡€ç»“æ„

```typescript
const config = {
  name: "æµ‹è¯•é…ç½®åç§°",
  description: "æµ‹è¯•é…ç½®æè¿°",
  groups: [
    {
      name: "æµ‹è¯•ç»„åç§°",
      http: {
        baseUrl: "http://localhost:3000",
        headers: { "User-Agent": "thunderbench/1.0" }
      },
      // wrk æ ¸å¿ƒå‚æ•°
      threads: 4,        // -t çº¿ç¨‹æ•°
      connections: 100,   // -c è¿æ¥æ•°
      duration: 30,       // -d æµ‹è¯•æ—¶é•¿(ç§’)
      timeout: 5,         // --timeout è¶…æ—¶æ—¶é—´
      latency: true,      // --latency å»¶è¿Ÿç»Ÿè®¡
      
      // æ‰§è¡Œæ¨¡å¼
      executionMode: "parallel", // parallel æˆ– sequential
      delay: 2,                   // ç»„é—´å»¶è¿Ÿ(ç§’)
      
      // æµ‹è¯•æ¥å£
      tests: [
        {
          name: "APIæµ‹è¯•",
          request: { 
            method: "GET", 
            url: "/api/test" 
          },
          weight: 100
        }
      ]
    }
  ]
};
```

### wrk å‚æ•°è¯´æ˜

| å‚æ•° | å¯¹åº” wrk é€‰é¡¹ | æè¿° | ç¤ºä¾‹å€¼ |
|------|---------------|------|--------|
| `threads` | `-t` | çº¿ç¨‹æ•° | `4` |
| `connections` | `-c` | è¿æ¥æ•° | `100` |
| `duration` | `-d` | æµ‹è¯•æ—¶é•¿ï¼ˆç§’ï¼‰ | `30` |
| `timeout` | `--timeout` | è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ | `5` |
| `latency` | `--latency` | å»¶è¿Ÿç»Ÿè®¡ | `true` |

## ğŸ“ˆ æµ‹è¯•ç»“æœ

### å®æ—¶è¾“å‡ºç¤ºä¾‹

```
æ‰§è¡Œæµ‹è¯•ç»„: åŸºç¡€æµ‹è¯•ç»„ (1/1)
å¹¶è¡Œæ‰§è¡Œæ¨¡å¼: åŒæ—¶æµ‹è¯•æ‰€æœ‰æ¥å£
  å¯åŠ¨æ¥å£æµ‹è¯•: GET è¯·æ±‚æµ‹è¯•
    wrk -t4 -c100 -d10s GET è¯·æ±‚æµ‹è¯• (æƒé‡: 100%)
åŸºç¡€æµ‹è¯•ç»„: 100% (1/1) | åŸºç¡€æµ‹è¯•ç»„
å®æ—¶: 0 è¯·æ±‚ | 0.0% æˆåŠŸ | å¹³å‡ 0ms | 0.0 req/s
```

### æœ€ç»ˆæŠ¥å‘Šç¤ºä¾‹

```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                ThunderBench æ€§èƒ½æµ‹è¯•ç»“æœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è€—æ—¶: 10.13s
æ€»è¯·æ±‚æ•°: 1,443,024
æˆåŠŸ: 1,443,024 (100.0%)
å¹³å‡å»¶è¿Ÿ: 0.71ms
P95å»¶è¿Ÿ: 14.09ms
ååé‡: 142862.0 req/s
å»¶è¿Ÿåˆ†å¸ƒ: P50: 0ms | P90: 0ms | P95: 14.09ms | P99: 0ms
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### ç¯å¢ƒå˜é‡

```bash
# è®¾ç½®è¯¦ç»†æ—¥å¿—
export THUNDERBENCH_VERBOSE=true

# è®¾ç½®é»˜è®¤è¶…æ—¶
export THUNDERBENCH_TIMEOUT=10000
```

### é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§

1. å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. ç¯å¢ƒå˜é‡
3. é…ç½®æ–‡ä»¶
4. é»˜è®¤å€¼ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰

## ğŸ“ è¾“å‡ºæ–‡ä»¶

### æŠ¥å‘Šç›®å½•ç»“æ„

```
reports/
â””â”€â”€ 2025-08-22_07-10-29/
    â”œâ”€â”€ report.json      # JSON æ ¼å¼æŠ¥å‘Š
    â”œâ”€â”€ report.md        # Markdown æ ¼å¼æŠ¥å‘Š
    â””â”€â”€ summary.txt      # æ‘˜è¦æŠ¥å‘Š
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é—®é¢˜**: ç¡®ä¿å¯¹è¾“å‡ºç›®å½•æœ‰å†™æƒé™
2. **å†…å­˜ä¸è¶³**: å‡å°‘å¹¶å‘æ•°å’Œè¿æ¥æ•°
3. **ç½‘ç»œè¶…æ—¶**: è°ƒæ•´è¶…æ—¶æ—¶é—´è®¾ç½®
4. **é…ç½®æ–‡ä»¶é”™è¯¯**: ä½¿ç”¨ `--dry-run` éªŒè¯é…ç½®

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
thunderbench --config config.js --verbose

# ä»…éªŒè¯é…ç½®
thunderbench --config config.js --dry-run
```

---

ğŸ’¡ **æç¤º**: é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆè¿è¡Œ `--create-example` åˆ›å»ºç¤ºä¾‹é…ç½®ï¼Œç„¶åä½¿ç”¨ `--dry-run` éªŒè¯é…ç½®æ­£ç¡®æ€§ã€‚
